<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style x:Key="MaterialDesignUnderlineStyle" TargetType="ContentControl">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <ControlTemplate.Resources>
                        <CircleEase x:Key="UnderlineEasingFunction" EasingMode="EaseOut"/>
                        <Storyboard x:Key="ExpandUnderlineBorderStoryboard">
                            <DoubleAnimation Storyboard.TargetName="UnderlineBorder"
                                                 Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                                 Duration="0:0:0.4"
                                                 EasingFunction="{StaticResource UnderlineEasingFunction}"
                                                 To="1"/>
                        </Storyboard>
                        <Storyboard x:Key="CollapseUnderlineBorderStoryboard">
                            <DoubleAnimation Storyboard.TargetName="UnderlineBorder"
                                                 Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                                 Duration="0:0:0.4"
                                                 EasingFunction="{StaticResource UnderlineEasingFunction}"
                                                 To="0"/>
                        </Storyboard>
                    </ControlTemplate.Resources>
                    <Border x:Name="UnderlineBorder"
                        VerticalAlignment="Bottom"
                        Background="{TemplateBinding Background}"
                        IsHitTestVisible="False"
                        Height="2"
                        HorizontalAlignment="Stretch"
                        SnapsToDevicePixels="True"
                        RenderTransformOrigin="0.5,0.5">
                        <Border.RenderTransform>
                            <ScaleTransform ScaleX="0" ScaleY="1"/>
                        </Border.RenderTransform>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsVisible" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard Storyboard="{StaticResource ExpandUnderlineBorderStoryboard}"/>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard Storyboard="{StaticResource CollapseUnderlineBorderStoryboard}"/>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>